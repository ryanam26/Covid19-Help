(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(53),s=n.n(i),c=n(7),o=(n(63),n(1)),l=n.n(o),u=n(11),h=n(3),m=n(4),d=n(9),p=n(8),b=n(10),f=n(14),v=n(54),E=new(function(){function e(){Object(h.a)(this,e),this.auth0=new v.a.WebAuth({domain:"dev-8phuysyw.auth0.com",audience:"https://dev-8phuysyw.auth0.com/userinfo",clientID:"VaTIJDgVoTChhck5JhspfFo8FoUv3LLT",redirectUri:"http://localhost:3000/callback",responseType:"id_token",scope:"openid profile"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(m.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise((function(t,n){e.auth0.parseHash((function(a,r){return a?n(a):r&&r.idToken?(e.setSession(r),void t()):n(a)}))}))}},{key:"setSession",value:function(e){this.idToken=e.idToken,this.profile=e.idTokenPayload,this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"signOut",value:function(){this.auth0.logout({returnTo:"http://localhost:3000",clientID:"VaTIJDgVoTChhck5JhspfFo8FoUv3LLT"})}},{key:"silentAuth",value:function(){var e=this;return new Promise((function(t,n){e.auth0.checkSession({},(function(a,r){if(a)return n(a);e.setSession(r),t()}))}))}}]),e}());var k=Object(f.e)((function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary fixed-top"},r.a.createElement(c.b,{className:"navbar-brand",to:"/"},"Covid19 - Help"),!E.isAuthenticated()&&r.a.createElement("button",{className:"btn btn-dark",onClick:E.signIn},"Sign In"),E.isAuthenticated()&&r.a.createElement("div",null,r.a.createElement("label",{className:"mr-2 text-white"},E.getProfile().name),r.a.createElement("button",{className:"btn btn-dark",onClick:function(){E.signOut(),e.history.replace("/")}},"Sign Out")))})),w=n(23),y=n(16),g=n.n(y),O=(n(42),function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={answer:""},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"updateAnswer",value:function(e){this.setState({answer:e})}},{key:"submit",value:function(){this.props.submitAnswer(this.state.answer),this.setState({answer:""}),window.location.reload()}},{key:"render",value:function(){var e=this;return E.isAuthenticated()?r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"How can you help:"),r.a.createElement("input",{id:"answer-input",type:"text",onChange:function(t){e.updateAnswer(t.target.value)},className:"form-control",placeholder:"I can help with....",value:this.state.answer})),r.a.createElement("button",{id:"answer-button",className:"btn btn-primary ".concat(this.state.answer.length>0?"enable":"disable"),onClick:function(){e.submit()}},"Submit"),r.a.createElement("hr",{className:"my-4"})):null}}]),t}(a.Component)),j=Object(f.e)(O),N=n(57),x=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={question:null},n.submitAnswer=n.submitAnswer.bind(Object(w.a)(n)),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshQuestion();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshQuestion",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,e.next=3,g.a.get("http://localhost:5000/".concat(t.questionId));case 3:n=e.sent.data,this.setState({question:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitAnswer",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("http://localhost:5000/answer/".concat(this.state.question.id),{answer:t},{headers:{Authorization:"Bearer ".concat(E.getIdToken())}});case 2:return e.next=4,this.refreshQuestion();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.question;return null===e?r.a.createElement("p",null,"Loading ..."):r.a.createElement(N.Animated,{animationIn:"fadeIn",animationOut:"zoomOutDown",animationInDuration:800,animationOutDuration:1e3,isVisible:!0},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"jumbotron col-12"},r.a.createElement("h1",{className:"display-3"},e.title),r.a.createElement("p",{className:"lead"},e.description),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(j,{questionId:e.id,submitAnswer:this.submitAnswer}),r.a.createElement("p",null,"Answers:"),e.answers.reverse().map((function(e,t){return r.a.createElement("p",{className:"lead q-p",key:t},e)}))))))}}]),t}(a.Component),A=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={questions:null},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("http://localhost:5000/");case 2:t=e.sent.data,this.setState({questions:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(c.b,{to:"/new-question"},r.a.createElement("div",{className:"card text-white bg-secondary mb-3"},r.a.createElement("div",{className:"card-header"},"Need help? Ask here!"),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"+ New Question"),r.a.createElement("p",{className:"card-text"},"Don't worry. Help is on the way!")))),null===this.state.questions&&r.a.createElement("p",null,"Loading questions..."),this.state.questions&&this.state.questions.map((function(e){return r.a.createElement("div",{key:e.id,className:"col-sm-12 col-md-4 col-lg-3"},r.a.createElement(c.b,{to:"/question/".concat(e.id)},r.a.createElement("div",{className:"card text-white bg-success mb-3"},r.a.createElement("div",{className:"card-header"},"Answers: ",e.answers),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.description)))))}))))}}]),t}(a.Component),I=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.handleAuthentication();case 2:this.props.history.replace("/");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("p",null,"Loading profile...")}}]),t}(a.Component),S=Object(f.e)(I),T=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={disabled:!1,title:"",description:""},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"updateDescription",value:function(e){this.setState({description:e})}},{key:"updateTitle",value:function(e){this.setState({title:e})}},{key:"submit",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({disabled:!0}),e.next=3,g.a.post("http://localhost:5000",{title:this.state.title,description:this.state.description},{headers:{Authorization:"Bearer ".concat(E.getIdToken())}});case 3:this.props.history.push("/");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card border-primary"},r.a.createElement("div",{className:"card-header"},"What do you need help with?"),r.a.createElement("div",{className:"card-body text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"What city are you?"),r.a.createElement("input",{disabled:this.state.disabled,type:"text",onBlur:function(t){e.updateTitle(t.target.value)},className:"form-control",placeholder:"Enter your city"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Description:"),r.a.createElement("input",{disabled:this.state.disabled,type:"text",onBlur:function(t){e.updateDescription(t.target.value)},className:"form-control",placeholder:"Describe what you need help with."})),r.a.createElement("button",{disabled:this.state.disabled,className:"btn btn-primary",onClick:function(){e.submit()}},"Submit"))))))}}]),t}(a.Component),q=Object(f.e)(T);var D=function(e){var t=e.component,n=e.path,a=e.checkingSession;return r.a.createElement(f.a,{path:n,render:function(){return a?r.a.createElement("h3",{className:"text-center"},"Validating session..."):E.isAuthenticated()?r.a.createElement(t,null):(E.signIn(),r.a.createElement("div",null))}})},C=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={checkingSession:!0},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/callback"!==this.props.location.pathname){e.next=3;break}return this.setState({checkingSession:!1}),e.abrupt("return");case 3:return e.prev=3,e.next=6,E.silentAuth();case 6:this.forceUpdate(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),"login_required"!==e.t0.error&&console.log(e.t0.error);case 12:this.setState({checkingSession:!1});case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{class:"text-center"},"This is a test"),r.a.createElement(k,null),r.a.createElement(f.a,{exact:!0,path:"/",component:A}),r.a.createElement(f.a,{exact:!0,path:"/question/:questionId",component:x}),r.a.createElement(f.a,{exact:!0,path:"/callback",component:S}),r.a.createElement(D,{path:"/new-question",component:q,checkingSession:this.state.checkingSession}))}}]),t}(a.Component),F=Object(f.e)(C);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(c.a,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,t,n){},58:function(e,t,n){e.exports=n(135)},63:function(e,t,n){}},[[58,1,2]]]);
//# sourceMappingURL=main.7f693adc.chunk.js.map